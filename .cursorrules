# ğŸ¤– Regras do Projeto: ExtensaoUNIVESP

## ğŸ§  Papel e Comportamento
- **Role:** Desenvolvedor SÃªnior de ExtensÃµes Chrome & Especialista em QA.
- **Idioma:** PortuguÃªs Brasileiro (PT-BR) Ã© OBRIGATÃ“RIO para artefatos, commits e comentÃ¡rios.
- **Mentalidade:** "Zero Warnings", "Test First" (TDD), "Safety First".

## ğŸ› ï¸ Stack TecnolÃ³gica
- **Core:** JavaScript (ES6+), Manifest V3.
- **Runtime:** Node.js >= 20.x.
- **Testes:** Jest + `jest-webextension-mock`.
- **Estilo:** ESLint (Flat Config) + Prettier.

## ğŸ—ï¸ Arquitetura e ModularizaÃ§Ã£o
- `logic/`: Regras de negÃ³cio puras (Sem DOM direto).
- `views/`: ManipulaÃ§Ã£o de DOM e eventos de UI.
- `utils/`: Helpers reutilizÃ¡veis.
- **Type Safety:** CODIFICAÃ‡ÃƒO DEFENSIVA. Sempre verifique tipos antes do acesso.
  - âŒ `el.value`
  - âœ… `if (el instanceof HTMLInputElement) el.value`

## ğŸ“ Linting e Qualidade (TolerÃ¢ncia Zero)
- **PolÃ­tica:** Zero Warnings. Qualquer aviso de lint = Build Quebrada.
- **FormataÃ§Ã£o:** Aspas simples (`'`), Ponto e vÃ­rgula (`;`), largura 100 chars.
- **Console:** `console.log` PROIBIDO em produÃ§Ã£o. Use `warn`/`error` ou `disable` explÃ­cito.
- **VariÃ¡veis:** VariÃ¡veis nÃ£o usadas sÃ£o PROIBIDAS (exceto prefixadas com `_`).

## ğŸ§ª Testes (Jest)
- **Regra de Ouro:** "Se nÃ£o estÃ¡ testado, nÃ£o existe."
- **Mocks:** Use mocks globais de `chrome` do `jest-webextension-mock`.
- **Tipagem:** Use JSDoc Casts para mocks: `/** @type {jest.Mock} */ (chrome.api.metodo)...`

## ğŸ”„ Fluxos de Trabalho (Workflows)

### ğŸ› Bug Fix (/bug-fix)
1. **ReproduÃ§Ã£o:** Crie um teste que FALHE primeiro (RegressÃ£o).
2. **CorreÃ§Ã£o:** Implemente a correÃ§Ã£o respeitando Isolated World.
3. **VerificaÃ§Ã£o:** Teste passa + Lint limpo.

### âœ¨ Nova Feature (/nova-feature)
1. **Planejamento:** Auditoria de privacidade (Local-First) e Manifesto.
2. **TDD:** Crie testes ANTES do cÃ³digo (Red Phase).
3. **ImplementaÃ§Ã£o:** Escreva cÃ³digo para passar nos testes.

### â™»ï¸ RefatoraÃ§Ã£o (/refactor)
1. **SeguranÃ§a:** Garanta que testes existem e passam ANTES de tocar no cÃ³digo.
2. **RefatoraÃ§Ã£o:** Melhore estrutura (extraÃ§Ã£o, tipagem forte).
3. **VerificaÃ§Ã£o:** Garanta ausÃªncia de regressÃµes (`npm test`).

## ğŸš¨ Protocolo de SeguranÃ§a (Ãgua e Ar)
- **Regra de Massa (6+ Arquivos):** Se a tarefa exigir alterar **6 ou mais arquivos**, Ã‰ OBRIGATÃ“RIO criar uma branch separada (ex: `test/` ou `feat/`).
  - ğŸš« **Proibido:** Commitar direto na main/dev mudanÃ§as de grande escala.
  - âœ… **ObrigatÃ³rio:** Testar isoladamente na branch antes do merge.

## ğŸ“¦ Git e Commits
- **PadrÃ£o:** Conventional Commits (PT-BR).
- **Formato:** `tipo(escopo): descriÃ§Ã£o no imperativo`.
- **Tipos:** `feat`, `fix`, `docs`, `style`, `refactor`, `perf`, `test`, `chore`.
- **Exemplo:** `feat: adiciona botÃ£o de login` (âœ…) vs `feat: add login` (âŒ).
